<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†Ø´Ø¦ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ | Professional CV Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/tajawal@5.0.0/index.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/roboto@5.0.0/index.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --background: #f8fafc;
            --surface: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: 'Tajawal', 'Roboto', sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        body.en {
            font-family: 'Roboto', 'Tajawal', sans-serif;
            direction: ltr;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px;
            width: 100%;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 25px 15px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.9;
        }

        .lang-switch {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1000;
        }

        .lang-btn {
            background: var(--surface);
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            font-size: 0.9rem;
        }

        .lang-btn:active {
            transform: scale(0.95);
        }

        /* Main Layout */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Form Section */
        .form-section {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title svg {
            width: 24px;
            height: 24px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: var(--surface);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            touch-action: manipulation;
        }

        .btn:active {
            transform: scale(0.97);
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
            padding: 8px 12px;
            font-size: 0.85rem;
        }

        .btn-add {
            background: var(--background);
            color: var(--primary-color);
            border: 2px dashed var(--primary-color);
            width: 100%;
            margin-top: 12px;
        }

        .btn-image {
            background: #8b5cf6;
            color: white;
        }

        /* Dynamic Items */
        .dynamic-item {
            background: var(--background);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 12px;
            position: relative;
            border: 1px solid var(--border-color);
        }

        .dynamic-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .item-number {
            background: var(--primary-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Preview Section */
        .preview-section {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preview-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .preview-actions .btn {
            padding: 10px 15px;
            font-size: 0.85rem;
        }

        /* Resume Preview */
        .resume-preview {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            min-height: 600px;
            max-width: 100%;
            overflow-x: hidden;
        }

        @media (max-width: 600px) {
            .resume-preview {
                padding: 20px;
            }
        }

        .resume-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
            margin-bottom: 25px;
        }

        .resume-name {
            font-size: 2rem;
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .resume-title {
            font-size: 1.1rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
        }

        .resume-contact {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .resume-contact-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .resume-contact-item svg {
            width: 16px;
            height: 16px;
            color: var(--primary-color);
        }

        .resume-section {
            margin-bottom: 25px;
        }

        .resume-section-title {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .resume-section-title svg {
            width: 20px;
            height: 20px;
        }

        .resume-item {
            margin-bottom: 15px;
        }

        .resume-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .resume-item-title {
            font-weight: 700;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .resume-item-subtitle {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .resume-item-date {
            color: var(--primary-color);
            font-weight: 600;
            background: rgba(37, 99, 235, 0.1);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .resume-item-description {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.9rem;
        }

        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .skill-tag {
            background: var(--primary-color);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .languages-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        .language-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--background);
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .language-name {
            font-weight: 600;
        }

        .language-level {
            display: flex;
            gap: 2px;
            font-size: 1rem;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-state svg {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Color Theme Selector */
        .theme-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .theme-option {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .theme-option.active {
            border-color: var(--text-primary);
            transform: scale(1.1);
        }

        /* Photo Upload */
        .photo-upload {
            text-align: center;
            margin-bottom: 15px;
        }

        .photo-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid var(--primary-color);
            margin: 0 auto 12px;
            background: var(--background);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-preview:active {
            transform: scale(0.95);
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-preview svg {
            width: 40px;
            height: 40px;
            color: var(--secondary-color);
        }

        #photoInput {
            display: none;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .tabs::-webkit-scrollbar {
            height: 4px;
        }

        .tabs::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 2px;
        }

        .tab {
            padding: 8px 16px;
            background: var(--background);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: 0.85rem;
            white-space: nowrap;
        }

        .tab.active {
            background: var(--primary-color);
            color: white;
        }

        .tab:hover:not(.active) {
            background: var(--border-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Loading */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            flex-direction: column;
            color: white;
        }

        .loading-overlay.active {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--text-primary);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 10000;
            transition: all 0.3s ease;
            opacity: 0;
            max-width: 90%;
            text-align: center;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: var(--success-color);
        }

        .toast.error {
            background: #ef4444;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 20px;
            font-size: 0.9rem;
        }

        /* Hidden resume for generation */
        #hiddenResume {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 794px;
            background: white;
        }

        /* Checkbox styling */
        input[type="checkbox"] {
            width: auto;
            margin-left: 8px;
        }

        body.en input[type="checkbox"] {
            margin-left: 0;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <!-- Language Switch -->
    <div class="lang-switch">
        <button class="lang-btn" onclick="toggleLanguage()">
            <span id="langBtnText">English</span>
        </button>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 id="headerTitle">ğŸ¯ Ù…Ù†Ø´Ø¦ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</h1>
            <p id="headerSubtitle">ØµÙ…Ù… Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆÙ‚Ù… Ø¨ØªÙ†Ø²ÙŠÙ„Ù‡Ø§ ÙƒÙ…Ù„Ù PDF Ø£Ùˆ ØµÙˆØ±Ø©</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Form Section -->
            <div class="form-section">
                <!-- Photo Upload -->
                <div class="photo-upload">
                    <label for="photoInput" class="photo-preview" id="photoPreview">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                    </label>
                    <input type="file" id="photoInput" accept="image/*" onchange="handlePhotoUpload(event)">
                    <p id="photoText" style="color: var(--text-secondary); font-size: 0.9rem;">Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</p>
                </div>

                <!-- Theme Selector -->
                <div class="theme-selector">
                    <div class="theme-option active" style="background: #2563eb;" onclick="setTheme('#2563eb', this)"></div>
                    <div class="theme-option" style="background: #7c3aed;" onclick="setTheme('#7c3aed', this)"></div>
                    <div class="theme-option" style="background: #059669;" onclick="setTheme('#059669', this)"></div>
                    <div class="theme-option" style="background: #dc2626;" onclick="setTheme('#dc2626', this)"></div>
                    <div class="theme-option" style="background: #ea580c;" onclick="setTheme('#ea580c', this)"></div>
                    <div class="theme-option" style="background: #0891b2;" onclick="setTheme('#0891b2', this)"></div>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('personal')" id="tabPersonal">ğŸ‘¤ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</button>
                    <button class="tab" onclick="switchTab('experience')" id="tabExperience">ğŸ’¼ Ø§Ù„Ø®Ø¨Ø±Ø©</button>
                    <button class="tab" onclick="switchTab('education')" id="tabEducation">ğŸ“ Ø§Ù„ØªØ¹Ù„ÙŠÙ…</button>
                    <button class="tab" onclick="switchTab('skills')" id="tabSkills">âš¡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</button>
                    <button class="tab" onclick="switchTab('languages')" id="tabLanguages">ğŸŒ Ø§Ù„Ù„ØºØ§Øª</button>
                </div>

                <!-- Personal Info Tab -->
                <div class="tab-content active" id="personalTab">
                    <h3 class="section-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <span id="personalInfoTitle">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</span>
                    </h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label id="lblFullName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                            <input type="text" id="fullName" placeholder="Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label id="lblJobTitle">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
                            <input type="text" id="jobTitle" placeholder="Ù…Ø·ÙˆØ± ÙˆÙŠØ¨" oninput="updatePreview()">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label id="lblEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                            <input type="email" id="email" placeholder="email@example.com" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label id="lblPhone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                            <input type="tel" id="phone" placeholder="+966 50 000 0000" oninput="updatePreview()">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label id="lblLocation">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
                            <input type="text" id="location" placeholder="Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label id="lblWebsite">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                            <input type="url" id="website" placeholder="www.example.com" oninput="updatePreview()">
                        </div>
                    </div>

                    <div class="form-group">
                        <label id="lblSummary">Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø®ØµÙŠ</label>
                        <textarea id="summary" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø®ØµÙ‹Ø§ Ù…Ø®ØªØµØ±Ù‹Ø§ Ø¹Ù† Ù†ÙØ³Ùƒ ÙˆØ®Ø¨Ø±Ø§ØªÙƒ..." oninput="updatePreview()"></textarea>
                    </div>
                </div>

                <!-- Experience Tab -->
                <div class="tab-content" id="experienceTab">
                    <h3 class="section-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                        <span id="experienceTitle">Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</span>
                    </h3>

                    <div id="experienceItems"></div>

                    <button class="btn btn-add" onclick="addExperience()">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                        <span id="btnAddExperience">Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±Ø© Ø¹Ù…Ù„ÙŠØ©</span>
                    </button>
                </div>

                <!-- Education Tab -->
                <div class="tab-content" id="educationTab">
                    <h3 class="section-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"/>
                        </svg>
                        <span id="educationTitle">Ø§Ù„ØªØ¹Ù„ÙŠÙ…</span>
                    </h3>

                    <div id="educationItems"></div>

                    <button class="btn btn-add" onclick="addEducation()">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                        <span id="btnAddEducation">Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ…</span>
                    </button>
                </div>

                <!-- Skills Tab -->
                <div class="tab-content" id="skillsTab">
                    <h3 class="section-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        <span id="skillsTitle">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</span>
                    </h3>

                    <div class="form-group">
                        <label id="lblSkills">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙØ§ØµÙ„Ø©)</label>
                        <textarea id="skillsInput" placeholder="HTML, CSS, JavaScript, React, Node.js..." oninput="updatePreview()"></textarea>
                    </div>
                </div>

                <!-- Languages Tab -->
                <div class="tab-content" id="languagesTab">
                    <h3 class="section-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
                        </svg>
                        <span id="languagesTitle">Ø§Ù„Ù„ØºØ§Øª</span>
                    </h3>

                    <div id="languageItems"></div>

                    <button class="btn btn-add" onclick="addLanguage()">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                        <span id="btnAddLanguage">Ø¥Ø¶Ø§ÙØ© Ù„ØºØ©</span>
                    </button>
                </div>
            </div>

            <!-- Preview Section -->
            <div class="preview-section">
                <div class="preview-header">
                    <h3 class="section-title" style="margin-bottom: 0; border: none; font-size: 1.2rem;">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                        <span id="previewTitle">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</span>
                    </h3>
                    <div class="preview-actions">
                        <button class="btn btn-success" onclick="downloadPDF()">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            <span id="btnDownload">PDF</span>
                        </button>
                        <button class="btn btn-image" onclick="downloadImage()">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <span id="btnDownloadImage">ØµÙˆØ±Ø©</span>
                        </button>
                    </div>
                </div>

                <div id="resumePreview" class="resume-preview">
                    <div class="empty-state" id="emptyState">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <p id="emptyText">Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</p>
                    </div>

                    <div id="resumeContent" style="display: none;">
                        <!-- Resume Header -->
                        <div class="resume-header">
                            <img id="resumePhoto" src="" alt="" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 4px solid var(--primary-color); margin-bottom: 12px; display: none;">
                            <h1 class="resume-name" id="resumeName"></h1>
                            <p class="resume-title" id="resumeJobTitle"></p>
                            <div class="resume-contact" id="resumeContact"></div>
                        </div>

                        <!-- Summary -->
                        <div class="resume-section" id="resumeSummarySection">
                            <h3 class="resume-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                                <span id="resumeSummaryTitle">Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø®ØµÙŠ</span>
                            </h3>
                            <p class="resume-item-description" id="resumeSummary"></p>
                        </div>

                        <!-- Experience -->
                        <div class="resume-section" id="resumeExperienceSection">
                            <h3 class="resume-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                <span id="resumeExperienceTitle">Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</span>
                            </h3>
                            <div id="resumeExperienceItems"></div>
                        </div>

                        <!-- Education -->
                        <div class="resume-section" id="resumeEducationSection">
                            <h3 class="resume-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                                    <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"/>
                                </svg>
                                <span id="resumeEducationTitle">Ø§Ù„ØªØ¹Ù„ÙŠÙ…</span>
                            </h3>
                            <div id="resumeEducationItems"></div>
                        </div>

                        <!-- Skills -->
                        <div class="resume-section" id="resumeSkillsSection">
                            <h3 class="resume-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                                <span id="resumeSkillsTitle">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</span>
                            </h3>
                            <div class="skills-container" id="resumeSkills"></div>
                        </div>

                        <!-- Languages -->
                        <div class="resume-section" id="resumeLanguagesSection">
                            <h3 class="resume-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
                                </svg>
                                <span id="resumeLanguagesTitle">Ø§Ù„Ù„ØºØ§Øª</span>
                            </h3>
                            <div class="languages-container" id="resumeLanguages"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p id="footerText">Â© 2024 Ù…Ù†Ø´Ø¦ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±...</p>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // State
        let currentLang = 'ar';
        let experienceCount = 0;
        let educationCount = 0;
        let languageCount = 0;
        let currentTheme = '#2563eb';
        let photoData = '';

        // Translations
        const translations = {
            ar: {
                headerTitle: 'ğŸ¯ Ù…Ù†Ø´Ø¦ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ',
                headerSubtitle: 'ØµÙ…Ù… Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆÙ‚Ù… Ø¨ØªÙ†Ø²ÙŠÙ„Ù‡Ø§ ÙƒÙ…Ù„Ù PDF Ø£Ùˆ ØµÙˆØ±Ø©',
                langBtnText: 'English',
                tabPersonal: 'ğŸ‘¤ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©',
                tabExperience: 'ğŸ’¼ Ø§Ù„Ø®Ø¨Ø±Ø©',
                tabEducation: 'ğŸ“ Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
                tabSkills: 'âš¡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª',
                tabLanguages: 'ğŸŒ Ø§Ù„Ù„ØºØ§Øª',
                personalInfoTitle: 'Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©',
                lblFullName: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„',
                lblJobTitle: 'Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ',
                lblEmail: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                lblPhone: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
                lblLocation: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹',
                lblWebsite: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                lblSummary: 'Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø®ØµÙŠ',
                experienceTitle: 'Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©',
                btnAddExperience: 'Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±Ø© Ø¹Ù…Ù„ÙŠØ©',
                educationTitle: 'Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
                btnAddEducation: 'Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ…',
                skillsTitle: 'Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª',
                lblSkills: 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙØ§ØµÙ„Ø©)',
                languagesTitle: 'Ø§Ù„Ù„ØºØ§Øª',
                btnAddLanguage: 'Ø¥Ø¶Ø§ÙØ© Ù„ØºØ©',
                previewTitle: 'Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©',
                btnDownload: 'PDF',
                btnDownloadImage: 'ØµÙˆØ±Ø©',
                emptyText: 'Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©',
                resumeSummaryTitle: 'Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø®ØµÙŠ',
                resumeExperienceTitle: 'Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©',
                resumeEducationTitle: 'Ø§Ù„ØªØ¹Ù„ÙŠÙ…',
                resumeSkillsTitle: 'Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª',
                resumeLanguagesTitle: 'Ø§Ù„Ù„ØºØ§Øª',
                footerText: 'Â© 2024 Ù…Ù†Ø´Ø¦ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.',
                placeholderFullName: 'Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯',
                placeholderJobTitle: 'Ù…Ø·ÙˆØ± ÙˆÙŠØ¨',
                placeholderEmail: 'email@example.com',
                placeholderPhone: '+966 50 000 0000',
                placeholderLocation: 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
                placeholderWebsite: 'www.example.com',
                placeholderSummary: 'Ø§ÙƒØªØ¨ Ù…Ù„Ø®ØµÙ‹Ø§ Ù…Ø®ØªØµØ±Ù‹Ø§ Ø¹Ù† Ù†ÙØ³Ùƒ ÙˆØ®Ø¨Ø±Ø§ØªÙƒ...',
                placeholderSkills: 'HTML, CSS, JavaScript, React, Node.js...',
                lblPosition: 'Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ',
                lblCompany: 'Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©',
                lblStartDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡',
                lblEndDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡',
                lblCurrent: 'Ø­Ø§Ù„ÙŠÙ‹Ø§',
                lblDescription: 'Ø§Ù„ÙˆØµÙ',
                lblDegree: 'Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©',
                lblInstitution: 'Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©',
                lblGradYear: 'Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬',
                lblLanguage: 'Ø§Ù„Ù„ØºØ©',
                lblLevel: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰',
                btnRemove: 'Ø­Ø°Ù',
                toastSaved: 'ØªÙ… Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!',
                toastDownload: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±...',
                toastError: 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰',
                toastImageError: 'ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©ØŒ Ø¬Ø±Ø¨ PDF',
                photoText: 'Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©',
                loadingText: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ù„Ù...'
            },
            en: {
                headerTitle: 'ğŸ¯ Professional CV Builder',
                headerSubtitle: 'Design your professional resume and download as PDF or Image',
                langBtnText: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
                tabPersonal: 'ğŸ‘¤ Personal Info',
                tabExperience: 'ğŸ’¼ Experience',
                tabEducation: 'ğŸ“ Education',
                tabSkills: 'âš¡ Skills',
                tabLanguages: 'ğŸŒ Languages',
                personalInfoTitle: 'Personal Information',
                lblFullName: 'Full Name',
                lblJobTitle: 'Job Title',
                lblEmail: 'Email',
                lblPhone: 'Phone Number',
                lblLocation: 'Location',
                lblWebsite: 'Website',
                lblSummary: 'Professional Summary',
                experienceTitle: 'Work Experience',
                btnAddExperience: 'Add Experience',
                educationTitle: 'Education',
                btnAddEducation: 'Add Education',
                skillsTitle: 'Skills',
                lblSkills: 'Enter skills (separate with commas)',
                languagesTitle: 'Languages',
                btnAddLanguage: 'Add Language',
                previewTitle: 'CV Preview',
                btnDownload: 'PDF',
                btnDownloadImage: 'Image',
                emptyText: 'Start entering your information to see preview',
                resumeSummaryTitle: 'Professional Summary',
                resumeExperienceTitle: 'Work Experience',
                resumeEducationTitle: 'Education',
                resumeSkillsTitle: 'Skills',
                resumeLanguagesTitle: 'Languages',
                footerText: 'Â© 2024 Professional CV Builder. All rights reserved.',
                placeholderFullName: 'John Doe',
                placeholderJobTitle: 'Web Developer',
                placeholderEmail: 'email@example.com',
                placeholderPhone: '+1 234 567 8900',
                placeholderLocation: 'New York, USA',
                placeholderWebsite: 'www.example.com',
                placeholderSummary: 'Write a brief summary about yourself and your experience...',
                placeholderSkills: 'HTML, CSS, JavaScript, React, Node.js...',
                lblPosition: 'Position',
                lblCompany: 'Company Name',
                lblStartDate: 'Start Date',
                lblEndDate: 'End Date',
                lblCurrent: 'Present',
                lblDescription: 'Description',
                lblDegree: 'Degree',
                lblInstitution: 'Institution',
                lblGradYear: 'Graduation Year',
                lblLanguage: 'Language',
                lblLevel: 'Level',
                btnRemove: 'Remove',
                toastSaved: 'Downloaded successfully!',
                toastDownload: 'Preparing...',
                toastError: 'An error occurred, try again',
                toastImageError: 'Failed to save image, try PDF',
                photoText: 'Click to upload your photo',
                loadingText: 'Preparing file...'
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateTexts();
            addExperience();
            addEducation();
            addLanguage();
        });

        // Language Toggle
        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.body.classList.toggle('en', currentLang === 'en');
            updateTexts();
            updatePreview();
        }

        function updateTexts() {
            const t = translations[currentLang];
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('headerSubtitle').textContent = t.headerSubtitle;
            document.getElementById('langBtnText').textContent = t.langBtnText;
            document.getElementById('tabPersonal').textContent = t.tabPersonal;
            document.getElementById('tabExperience').textContent = t.tabExperience;
            document.getElementById('tabEducation').textContent = t.tabEducation;
            document.getElementById('tabSkills').textContent = t.tabSkills;
            document.getElementById('tabLanguages').textContent = t.tabLanguages;
            document.getElementById('personalInfoTitle').textContent = t.personalInfoTitle;
            document.getElementById('lblFullName').textContent = t.lblFullName;
            document.getElementById('lblJobTitle').textContent = t.lblJobTitle;
            document.getElementById('lblEmail').textContent = t.lblEmail;
            document.getElementById('lblPhone').textContent = t.lblPhone;
            document.getElementById('lblLocation').textContent = t.lblLocation;
            document.getElementById('lblWebsite').textContent = t.lblWebsite;
            document.getElementById('lblSummary').textContent = t.lblSummary;
            document.getElementById('experienceTitle').textContent = t.experienceTitle;
            document.getElementById('btnAddExperience').textContent = t.btnAddExperience;
            document.getElementById('educationTitle').textContent = t.educationTitle;
            document.getElementById('btnAddEducation').textContent = t.btnAddEducation;
            document.getElementById('skillsTitle').textContent = t.skillsTitle;
            document.getElementById('lblSkills').textContent = t.lblSkills;
            document.getElementById('languagesTitle').textContent = t.languagesTitle;
            document.getElementById('btnAddLanguage').textContent = t.btnAddLanguage;
            document.getElementById('previewTitle').textContent = t.previewTitle;
            document.getElementById('btnDownload').textContent = t.btnDownload;
            document.getElementById('btnDownloadImage').textContent = t.btnDownloadImage;
            document.getElementById('emptyText').textContent = t.emptyText;
            document.getElementById('resumeSummaryTitle').textContent = t.resumeSummaryTitle;
            document.getElementById('resumeExperienceTitle').textContent = t.resumeExperienceTitle;
            document.getElementById('resumeEducationTitle').textContent = t.resumeEducationTitle;
            document.getElementById('resumeSkillsTitle').textContent = t.resumeSkillsTitle;
            document.getElementById('resumeLanguagesTitle').textContent = t.resumeLanguagesTitle;
            document.getElementById('footerText').textContent = t.footerText;
            document.getElementById('photoText').textContent = t.photoText;
            document.getElementById('loadingText').textContent = t.loadingText;

            // Update placeholders
            document.getElementById('fullName').placeholder = t.placeholderFullName;
            document.getElementById('jobTitle').placeholder = t.placeholderJobTitle;
            document.getElementById('email').placeholder = t.placeholderEmail;
            document.getElementById('phone').placeholder = t.placeholderPhone;
            document.getElementById('location').placeholder = t.placeholderLocation;
            document.getElementById('website').placeholder = t.placeholderWebsite;
            document.getElementById('summary').placeholder = t.placeholderSummary;
            document.getElementById('skillsInput').placeholder = t.placeholderSkills;

            // Update dynamic items
            updateDynamicItemLabels();
        }

        function updateDynamicItemLabels() {
            const t = translations[currentLang];
            document.querySelectorAll('.exp-position').forEach(el => el.textContent = t.lblPosition);
            document.querySelectorAll('.exp-company').forEach(el => el.textContent = t.lblCompany);
            document.querySelectorAll('.exp-start').forEach(el => el.textContent = t.lblStartDate);
            document.querySelectorAll('.exp-end').forEach(el => el.textContent = t.lblEndDate);
            document.querySelectorAll('.exp-current').forEach(el => el.textContent = t.lblCurrent);
            document.querySelectorAll('.exp-desc').forEach(el => el.textContent = t.lblDescription);
            document.querySelectorAll('.edu-degree').forEach(el => el.textContent = t.lblDegree);
            document.querySelectorAll('.edu-institution').forEach(el => el.textContent = t.lblInstitution);
            document.querySelectorAll('.edu-year').forEach(el => el.textContent = t.lblGradYear);
            document.querySelectorAll('.lang-name').forEach(el => el.textContent = t.lblLanguage);
            document.querySelectorAll('.lang-level').forEach(el => el.textContent = t.lblLevel);
            document.querySelectorAll('.btn-remove-text').forEach(el => el.textContent = t.btnRemove);
        }

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.getElementById(`tab${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`).classList.add('active');
            document.getElementById(`${tabName}Tab`).classList.add('active');
        }

        // Photo Upload
        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoData = e.target.result;
                    document.getElementById('photoPreview').innerHTML = `<img src="${photoData}" alt="Profile">`;
                    updatePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        // Theme Selector
        function setTheme(color, element) {
            currentTheme = color;
            document.documentElement.style.setProperty('--primary-color', color);
            document.documentElement.style.setProperty('--primary-dark', adjustColor(color, -20));
            
            document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
            element.classList.add('active');
            
            updatePreview();
        }

        function adjustColor(color, amount) {
            const hex = color.replace('#', '');
            const r = Math.max(0, Math.min(255, parseInt(hex.substr(0, 2), 16) + amount));
            const g = Math.max(0, Math.min(255, parseInt(hex.substr(2, 2), 16) + amount));
            const b = Math.max(0, Math.min(255, parseInt(hex.substr(4, 2), 16) + amount));
            return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
        }

        // Add Experience
        function addExperience() {
            const t = translations[currentLang];
            const id = ++experienceCount;
            const container = document.getElementById('experienceItems');
            
            const item = document.createElement('div');
            item.className = 'dynamic-item';
            item.id = `exp${id}`;
            item.innerHTML = `
                <div class="dynamic-item-header">
                    <div class="item-number">${id}</div>
                    <button class="btn btn-danger" onclick="removeItem('exp${id}')">
                        <span class="btn-remove-text">${t.btnRemove}</span>
                    </button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="exp-position">${t.lblPosition}</label>
                        <input type="text" class="exp-position-input" placeholder="${t.placeholderJobTitle}" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label class="exp-company">${t.lblCompany}</label>
                        <input type="text" class="exp-company-input" oninput="updatePreview()">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="exp-start">${t.lblStartDate}</label>
                        <input type="month" class="exp-start-input" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label class="exp-end">${t.lblEndDate}</label>
                        <input type="month" class="exp-end-input" oninput="updatePreview()">
                        <label style="margin-top: 8px; display: flex; align-items: center;">
                            <input type="checkbox" class="exp-current-input" onchange="toggleCurrentDate(this)">
                            <span class="exp-current">${t.lblCurrent}</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="exp-desc">${t.lblDescription}</label>
                    <textarea class="exp-desc-input" oninput="updatePreview()"></textarea>
                </div>
            `;
            
            container.appendChild(item);
            updateDynamicItemLabels();
        }

        // Add Education
        function addEducation() {
            const t = translations[currentLang];
            const id = ++educationCount;
            const container = document.getElementById('educationItems');
            
            const item = document.createElement('div');
            item.className = 'dynamic-item';
            item.id = `edu${id}`;
            item.innerHTML = `
                <div class="dynamic-item-header">
                    <div class="item-number">${id}</div>
                    <button class="btn btn-danger" onclick="removeItem('edu${id}')">
                        <span class="btn-remove-text">${t.btnRemove}</span>
                    </button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="edu-degree">${t.lblDegree}</label>
                        <input type="text" class="edu-degree-input" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label class="edu-institution">${t.lblInstitution}</label>
                        <input type="text" class="edu-institution-input" oninput="updatePreview()">
                    </div>
                </div>
                <div class="form-group">
                    <label class="edu-year">${t.lblGradYear}</label>
                    <input type="number" class="edu-year-input" placeholder="2024" oninput="updatePreview()">
                </div>
            `;
            
            container.appendChild(item);
            updateDynamicItemLabels();
        }

        // Add Language
        function addLanguage() {
            const t = translations[currentLang];
            const id = ++languageCount;
            const container = document.getElementById('languageItems');
            
            const item = document.createElement('div');
            item.className = 'dynamic-item';
            item.id = `lang${id}`;
            item.innerHTML = `
                <div class="dynamic-item-header">
                    <div class="item-number">${id}</div>
                    <button class="btn btn-danger" onclick="removeItem('lang${id}')">
                        <span class="btn-remove-text">${t.btnRemove}</span>
                    </button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="lang-name">${t.lblLanguage}</label>
                        <input type="text" class="lang-name-input" placeholder="English / Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label class="lang-level">${t.lblLevel}</label>
                        <select class="lang-level-input" onchange="updatePreview()">
                            <option value="1">â­</option>
                            <option value="2">â­â­</option>
                            <option value="3">â­â­â­</option>
                            <option value="4">â­â­â­â­</option>
                            <option value="5" selected>â­â­â­â­â­</option>
                        </select>
                    </div>
                </div>
            `;
            
            container.appendChild(item);
            updateDynamicItemLabels();
        }

        // Remove Item
        function removeItem(id) {
            document.getElementById(id).remove();
            updatePreview();
        }

        // Toggle Current Date
        function toggleCurrentDate(checkbox) {
            const endDateInput = checkbox.closest('.form-group').previousElementSibling.querySelector('input');
            if (checkbox.checked) {
                endDateInput.disabled = true;
                endDateInput.value = '';
            } else {
                endDateInput.disabled = false;
            }
            updatePreview();
        }

        // Update Preview
        function updatePreview() {
            const fullName = document.getElementById('fullName').value;
            const jobTitle = document.getElementById('jobTitle').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const location = document.getElementById('location').value;
            const website = document.getElementById('website').value;
            const summary = document.getElementById('summary').value;

            const emptyState = document.getElementById('emptyState');
            const resumeContent = document.getElementById('resumeContent');

            if (!fullName && !jobTitle) {
                emptyState.style.display = 'block';
                resumeContent.style.display = 'none';
                return;
            }

            emptyState.style.display = 'none';
            resumeContent.style.display = 'block';

            // Header
            document.getElementById('resumeName').textContent = fullName || 'Your Name';
            document.getElementById('resumeJobTitle').textContent = jobTitle || 'Job Title';

            // Photo
            const resumePhoto = document.getElementById('resumePhoto');
            if (photoData) {
                resumePhoto.src = photoData;
                resumePhoto.style.display = 'block';
            } else {
                resumePhoto.style.display = 'none';
            }

            // Contact
            const contactContainer = document.getElementById('resumeContact');
            contactContainer.innerHTML = '';
            
            if (email) {
                contactContainer.innerHTML += `
                    <div class="resume-contact-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                        <span>${email}</span>
                    </div>
                `;
            }
            
            if (phone) {
                contactContainer.innerHTML += `
                    <div class="resume-contact-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                        <span>${phone}</span>
                    </div>
                `;
            }
            
            if (location) {
                contactContainer.innerHTML += `
                    <div class="resume-contact-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        <span>${location}</span>
                    </div>
                `;
            }
            
            if (website) {
                contactContainer.innerHTML += `
                    <div class="resume-contact-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                        </svg>
                        <span>${website}</span>
                    </div>
                `;
            }

            // Summary
            const summarySection = document.getElementById('resumeSummarySection');
            if (summary) {
                summarySection.style.display = 'block';
                document.getElementById('resumeSummary').textContent = summary;
            } else {
                summarySection.style.display = 'none';
            }

            // Experience
            const expItems = document.querySelectorAll('#experienceItems .dynamic-item');
            const resumeExpItems = document.getElementById('resumeExperienceItems');
            const expSection = document.getElementById('resumeExperienceSection');
            
            if (expItems.length > 0) {
                expSection.style.display = 'block';
                resumeExpItems.innerHTML = '';
                
                expItems.forEach((item) => {
                    const position = item.querySelector('.exp-position-input').value;
                    const company = item.querySelector('.exp-company-input').value;
                    const startDate = item.querySelector('.exp-start-input').value;
                    const endDate = item.querySelector('.exp-end-input').value;
                    const isCurrent = item.querySelector('.exp-current-input').checked;
                    const description = item.querySelector('.exp-desc-input').value;
                    
                    if (position || company) {
                        const startDateFormatted = startDate ? formatDate(startDate) : '';
                        const endDateFormatted = isCurrent ? (currentLang === 'ar' ? 'Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†' : 'Present') : (endDate ? formatDate(endDate) : '');
                        
                        resumeExpItems.innerHTML += `
                            <div class="resume-item">
                                <div class="resume-item-header">
                                    <div>
                                        <div class="resume-item-title">${position || 'Position'}</div>
                                        <div class="resume-item-subtitle">${company || 'Company'}</div>
                                    </div>
                                    <div class="resume-item-date">${startDateFormatted} - ${endDateFormatted}</div>
                                </div>
                                ${description ? `<p class="resume-item-description">${description}</p>` : ''}
                            </div>
                        `;
                    }
                });
            } else {
                expSection.style.display = 'none';
            }

            // Education
            const eduItems = document.querySelectorAll('#educationItems .dynamic-item');
            const resumeEduItems = document.getElementById('resumeEducationItems');
            const eduSection = document.getElementById('resumeEducationSection');
            
            if (eduItems.length > 0) {
                eduSection.style.display = 'block';
                resumeEduItems.innerHTML = '';
                
                eduItems.forEach((item) => {
                    const degree = item.querySelector('.edu-degree-input').value;
                    const institution = item.querySelector('.edu-institution-input').value;
                    const year = item.querySelector('.edu-year-input').value;
                    
                    if (degree || institution) {
                        resumeEduItems.innerHTML += `
                            <div class="resume-item">
                                <div class="resume-item-header">
                                    <div>
                                        <div class="resume-item-title">${degree || 'Degree'}</div>
                                        <div class="resume-item-subtitle">${institution || 'Institution'}</div>
                                    </div>
                                    ${year ? `<div class="resume-item-date">${year}</div>` : ''}
                                </div>
                            </div>
                        `;
                    }
                });
            } else {
                eduSection.style.display = 'none';
            }

            // Skills
            const skillsInput = document.getElementById('skillsInput').value;
            const resumeSkills = document.getElementById('resumeSkills');
            const skillsSection = document.getElementById('resumeSkillsSection');
            
            if (skillsInput.trim()) {
                skillsSection.style.display = 'block';
                const skills = skillsInput.split(',').map(s => s.trim()).filter(s => s);
                resumeSkills.innerHTML = skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('');
            } else {
                skillsSection.style.display = 'none';
            }

            // Languages
            const langItems = document.querySelectorAll('#languageItems .dynamic-item');
            const resumeLanguages = document.getElementById('resumeLanguages');
            const langSection = document.getElementById('resumeLanguagesSection');
            
            if (langItems.length > 0) {
                langSection.style.display = 'block';
                resumeLanguages.innerHTML = '';
                
                langItems.forEach((item) => {
                    const name = item.querySelector('.lang-name-input').value;
                    const level = item.querySelector('.lang-level-input').value;
                    
                    if (name) {
                        let stars = '';
                        for (let i = 0; i < level; i++) {
                            stars += 'â­';
                        }
                        
                        resumeLanguages.innerHTML += `
                            <div class="language-item">
                                <span class="language-name">${name}</span>
                                <span class="language-level">${stars}</span>
                            </div>
                        `;
                    }
                });
            } else {
                langSection.style.display = 'none';
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString + '-01');
            const options = { year: 'numeric', month: 'short' };
            return currentLang === 'ar' ? date.toLocaleDateString('ar-SA', options) : date.toLocaleDateString('en-US', options);
        }

        // Show Loading
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }

        // Hide Loading
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        // Download PDF
        async function downloadPDF() {
            const t = translations[currentLang];
            
            if (!document.getElementById('fullName').value && !document.getElementById('jobTitle').value) {
                showToast(currentLang === 'ar' ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙˆÙ„Ø§Ù‹' : 'Please enter information first', 'error');
                return;
            }

            showLoading();

            try {
                const element = document.getElementById('resumePreview');
                const fullName = document.getElementById('fullName').value || 'CV';
                
                // Clone the element for PDF generation
                const clone = element.cloneNode(true);
                clone.style.width = '794px';
                clone.style.padding = '40px';
                clone.style.position = 'absolute';
                clone.style.left = '-9999px';
                clone.style.top = '0';
                clone.style.background = 'white';
                document.body.appendChild(clone);

                const opt = {
                    margin: 0,
                    filename: `${fullName}_CV.pdf`,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { 
                        scale: 2, 
                        useCORS: true,
                        logging: false,
                        windowWidth: 794
                    },
                    jsPDF: { 
                        unit: 'mm', 
                        format: 'a4', 
                        orientation: 'portrait',
                        compress: true
                    },
                    pagebreak: { mode: 'avoid-all' }
                };

                await html2pdf().set(opt).from(clone).save();
                
                document.body.removeChild(clone);
                hideLoading();
                showToast(t.toastSaved, 'success');
            } catch (err) {
                console.error('PDF Error:', err);
                hideLoading();
                showToast(t.toastError, 'error');
            }
        }

        // Download Image
        async function downloadImage() {
            const t = translations[currentLang];
            
            if (!document.getElementById('fullName').value && !document.getElementById('jobTitle').value) {
                showToast(currentLang === 'ar' ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙˆÙ„Ø§Ù‹' : 'Please enter information first', 'error');
                return;
            }

            showLoading();

            try {
                const element = document.getElementById('resumePreview');
                const fullName = document.getElementById('fullName').value || 'CV';
                
                // Clone the element for image generation
                const clone = element.cloneNode(true);
                clone.style.width = '794px';
                clone.style.padding = '40px';
                clone.style.position = 'absolute';
                clone.style.left = '-9999px';
                clone.style.top = '0';
                clone.style.background = 'white';
                document.body.appendChild(clone);

                const canvas = await html2canvas(clone, {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#ffffff',
                    windowWidth: 794
                });

                document.body.removeChild(clone);

                // Convert to blob and download
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = `${fullName}_CV.png`;
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);
                    
                    hideLoading();
                    showToast(t.toastSaved, 'success');
                }, 'image/png', 0.95);

            } catch (err) {
                console.error('Image Error:', err);
                hideLoading();
                showToast(t.toastImageError, 'error');
            }
        }

        // Toast Notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>

